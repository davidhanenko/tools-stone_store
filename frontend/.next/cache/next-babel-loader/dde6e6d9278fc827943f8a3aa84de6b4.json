{"ast":null,"code":"import _slicedToArray from \"/Volumes/Files/Work/A2Z/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useEmblaCarousel } from 'embla-carousel/react';\nimport { DotButton, PrevButton, NextButton } from '../SliderButtons';\nimport { useRecursiveTimeout } from '../../../../lib/useRecursiveTimeout';\nimport BannerSliderStyles from './BannerSliderStyles';\nimport Slide from './Slide';\nvar AUTOPLAY_INTERVAL = 4000;\n\nvar BannerSlider = function BannerSlider(_ref) {\n  var slides = _ref.slides,\n      mediaByIndex = _ref.mediaByIndex;\n\n  // animation state\n  var _useState = useState(false),\n      animation = _useState[0],\n      setAnimation = _useState[1]; // key state for slides\n\n\n  var _useState2 = useState(),\n      carouselRandomNumber = _useState2[0],\n      setCarouselRandomNumber = _useState2[1];\n\n  var _useEmblaCarousel = useEmblaCarousel({\n    loop: true,\n    skipSnaps: false,\n    speed: 8\n  }),\n      _useEmblaCarousel2 = _slicedToArray(_useEmblaCarousel, 2),\n      viewportRef = _useEmblaCarousel2[0],\n      embla = _useEmblaCarousel2[1];\n\n  var _useState3 = useState(false),\n      prevBtnEnabled = _useState3[0],\n      setPrevBtnEnabled = _useState3[1];\n\n  var _useState4 = useState(false),\n      nextBtnEnabled = _useState4[0],\n      setNextBtnEnabled = _useState4[1];\n\n  var _useState5 = useState(0),\n      selectedIndex = _useState5[0],\n      setSelectedIndex = _useState5[1];\n\n  var _useState6 = useState([]),\n      scrollSnaps = _useState6[0],\n      setScrollSnaps = _useState6[1];\n\n  var autoplay = useCallback(function () {\n    if (!embla) return;\n\n    if (embla.canScrollNext()) {\n      embla.scrollNext();\n      setCarouselRandomNumber(Math.random());\n      setAnimation(true);\n    } else {\n      embla.scrollTo(0);\n      setCarouselRandomNumber(Math.random());\n      setAnimation(true);\n    }\n  }, [embla]);\n\n  var _useRecursiveTimeout = useRecursiveTimeout(autoplay, AUTOPLAY_INTERVAL),\n      play = _useRecursiveTimeout.play,\n      stop = _useRecursiveTimeout.stop;\n\n  var scrollNext = useCallback(function () {\n    if (!embla) return;\n    setCarouselRandomNumber(Math.random());\n    embla.scrollNext();\n    stop();\n  }, [embla, stop]);\n  var scrollPrev = useCallback(function () {\n    if (!embla) return;\n    setCarouselRandomNumber(Math.random());\n    embla.scrollPrev();\n    stop();\n  }, [embla, stop]);\n  var scrollTo = useCallback(function (index) {\n    embla && embla.scrollTo(index), [embla];\n    setCarouselRandomNumber(Math.random());\n  });\n  var onSelect = useCallback(function () {\n    if (!embla) return;\n    setSelectedIndex(embla.selectedScrollSnap());\n    setPrevBtnEnabled(embla.canScrollPrev());\n    setNextBtnEnabled(embla.canScrollNext());\n  }, [embla, setSelectedIndex]);\n  useEffect(function () {\n    if (!embla) return;\n    onSelect();\n    setScrollSnaps(embla.scrollSnapList());\n    embla.on('select', onSelect);\n    embla.on('pointerDown', stop); // try to return if Embla don't\n  }, [embla, onSelect, setScrollSnaps, stop]);\n  useEffect(function () {\n    play();\n  }, [play]);\n  return /*#__PURE__*/_jsxs(BannerSliderStyles, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"embla__viewport\",\n      ref: viewportRef,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"embla__container\",\n        children: slides.map(function (index) {\n          return /*#__PURE__*/_jsx(\"div\", {\n            className: \"embla__slide\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"embla__slide__inner\",\n              children: /*#__PURE__*/_jsx(Slide, {\n                mediaByIndex: mediaByIndex,\n                index: index,\n                setAnimation: setAnimation,\n                animation: animation\n              }, \"\".concat(index, \"+\").concat(selectedIndex === index ? carouselRandomNumber : index))\n            })\n          }, index);\n        })\n      })\n    }), /*#__PURE__*/_jsx(PrevButton, {\n      onClick: scrollPrev,\n      enabled: prevBtnEnabled\n    }), /*#__PURE__*/_jsx(NextButton, {\n      onClick: scrollNext,\n      enabled: nextBtnEnabled\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"embla__dots\",\n      children: scrollSnaps.map(function (_, index) {\n        return /*#__PURE__*/_jsx(DotButton, {\n          selected: index === selectedIndex,\n          onClick: function onClick() {\n            return scrollTo(index);\n          }\n        }, index);\n      })\n    })]\n  });\n};\n\nexport default BannerSlider;","map":null,"metadata":{},"sourceType":"module"}